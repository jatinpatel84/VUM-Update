#Import CSV
$path= split-path -Parent $MyInvocation.MyCommand.Definition
$newpath = $path + ".\Hosts.csv"
$csv =@()
$CSV = Import-CSV -Path $newpath

#Function

foreach ($line in $csv) 
{

$vmhost = $line.host
$baseline = Get-baseline -targettype Host -baselinetype patch 
#Write-Host " Updating $($vmhost)...."


$checkcompliace = Get-Compliance -Entity $vmhost -Baseline $Baseline 

if ( $checkcompliace.status -eq 'NotCompliant' ) 

   {
    Write-host " Remediating $($vmhost)...." -ForegroundColor Yellow
    #Update-Entity -Baseline $baseline -Entity $vmhost -Confirm:$False -runasync
   }
else 
    { Write-Host " $($vmhost) is compliant " -ForegroundColor Green
    }

}
